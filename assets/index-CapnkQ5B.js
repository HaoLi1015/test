import{f as O}from"./index-DwLlSbug.js";/* empty css                   */import{T as ue}from"./index-Dliooj2m.js";/* empty css                 *//* empty css                     *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                   *//* empty css               *//* empty css                  */import{u as me}from"./usePagination-C2U8EQ-C.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                */import{l as pe,n as fe,C as _e,a2 as ce,a3 as ve,a4 as ge,a5 as be,a6 as ye,E as we,s as Ve,p as he,a7 as ke,a8 as Ce,a9 as xe,aa as Se,ab as De,B as qe,$ as Ee,V as Fe,ac as Ue,ad as ze,ae as Te}from"./element-BD9IHJJo.js";import{ad as B,r as s,v as Re,c as L,w as Ie,j as Oe,x as b,y as A,S as N,J as S,K as t,M as l,ae as Q,u as o,B as g,a3 as i,H as We,ab as Me,P as D,L as Pe}from"./vue-C2mfnOEg.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-gSuEEdzx.js";function $e(){return O({url:"order-management-table",method:"get"})}function Be(u){return O({url:"order-check",method:"post",data:u})}function Le(u){return O({url:"change/qy-staff",method:"put",data:u})}const Ae=[{prop:"ww_id",label:"旺旺ID",type:"input"},{prop:"status",label:"订单状态",type:"select",options:[{label:"服务中",value:"true"},{label:"解除协议",value:"false"}]},{prop:"qy_staff",label:"负责人",type:"select",options:[{label:"负责人1",value:"value1"},{label:"负责人2",value:"value2"},{label:"负责人3",value:"value3"}]}],Ne=[{id:"order_id",label:"订单ID",minWidth:"120px"},{id:"ww_id",label:"店主旺旺号",minWidth:"120px"},{id:"order_name",label:"订单名称",minWidth:"130px"},{id:"service_name",label:"服务名称",showOverflowTooltip:!0,minWidth:"120px"},{id:"status_name",label:"订单状态",minWidth:"110px",render:u=>B(pe,{type:u.status_name===!0?"success":"danger"},()=>u.status_name===!0?"服务中":"解除协议")},{id:"url",label:"URL",showOverflowTooltip:!0,minWidth:"120px",render:u=>B("a",{href:u.url,target:"_blank",style:"text-decoration: none; color: #50A6FF;"},u.url)},{id:"qy_staff_name",label:"负责人"},{id:"start_service_time",label:"服务开始时间",sortable:!0,minWidth:"140px"},{id:"end_service_time",label:"服务结束时间",sortable:!0,minWidth:"140px"},{id:"created_time",label:"创建时间",sortable:!0,minWidth:"140px"}],Qe={order_id:[{required:!0,message:"请输入订单ID",trigger:"blur"}],ww_id:[{required:!0,message:"请输入店主旺旺号",trigger:"blur"}],order_name:[{required:!0,message:"请输入订单名称",trigger:"blur"}],service_name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],status_name:[{required:!0,message:"请选择订单状态",trigger:"change"}],url:[{required:!0,message:"请输入URL",trigger:"blur"}],start_service_time:[{required:!0,message:"请选择服务日期",trigger:"blur"}],qy_staff_name:[{required:!0,message:"请选择负责人",trigger:"change"}]},n=s({order_id:"",ww_id:"",order_name:"",service_name:"",status_name:"",url:"",qy_staff_name:"",start_service_time:[]}),je={class:"app-container"},He={class:"toolbar-wrapper"},Je={class:"table-wrapper"},Ke={class:"pager-wrapper"},Ge={class:"dialog-footer"},Xe={class:"dialog-btn"},Ze={class:"dialog-footer"},el=Re({__name:"index",setup(u){const{paginationData:d,handleCurrentChange:j,handleSizeChange:H}=me(),h=s(!1),y=s(!1),w=s(!1),q=s(),f=s(),J=s("admin"),E=s(!1),k=s(!1),C=s(!1),x=s(!1),V=s();function K(r){d.currentPage=1}function G(){d.currentPage=1}const F=s([]),X=L(()=>{const r=(d.currentPage-1)*d.pageSize,e=r+d.pageSize;return F.value.slice(r,e)}),Z=L(()=>Ne.filter(r=>r.roles?r.roles.includes(J.value):!0));async function U(){h.value=!0,$e().then(r=>{F.value=r.data,d.total=F.value.length}).catch(r=>console.log(r,"err")).finally(()=>{h.value=!1})}async function ee(r){r&&await r.validate((e,z)=>{e&&(y.value=!1,n.value)})}function le(){var r;(r=q.value)==null||r.resetFields(),y.value=!1}function ae(r){f.value=r,f.value,w.value=!0}const c=s({ww_id:"",store_name:""});Ie([()=>d.currentPage,()=>d.pageSize],U,{immediate:!0}),Oe(()=>{U()});function te(r){k.value=!0,Be(r).then(e=>{V.value=e.data,x.value=!0,V.value}).catch(e=>{x.value=!1}).finally(()=>{k.value=!1})}function W(){C.value=!1,x.value=!1,c.value={ww_id:"",store_name:""}}function oe(){E.value=!0,w.value=!1,f.value;const r={order_id:f.value.order_id,ww_id:f.value.ww_id,qy_staff_name:f.value.qy_staff_name};Le(r).then(()=>{we.success("修改成功")}).catch(e=>console.error(e,"err")).finally(()=>E.value=!1)}return(r,e)=>{const z=fe,m=Ve,re=he,M=ke,ne=Ce,se=xe,_=Se,T=De,R=_e,v=qe,p=Ee,P=Fe,I=Ue,de=ze,ie=Te,Y=ce;return b(),A("div",je,[N((b(),S(z,{shadow:"never",class:"search-wrapper"},{default:t(()=>[l(ue,{fields:o(Ae),onSearch:K,onReset:G},null,8,["fields"])]),_:1})),[[Y,h.value]]),N((b(),S(z,{shadow:"never"},{default:t(()=>[g("div",He,[g("div",null,[l(m,{type:"primary",icon:o(ve),onClick:e[0]||(e[0]=a=>y.value=!0)},{default:t(()=>e[20]||(e[20]=[i(" 新增订单 ")])),_:1},8,["icon"]),l(m,{type:"primary",icon:o(ge),onClick:e[1]||(e[1]=a=>C.value=!0)},{default:t(()=>e[21]||(e[21]=[i(" 名单查询 ")])),_:1},8,["icon"])]),l(re,{content:"刷新当前页",placement:"top"},{default:t(()=>[l(m,{type:"primary",icon:o(be),circle:"",onClick:U},null,8,["icon"])]),_:1})]),g("div",Je,[l(ne,{data:X.value,"header-cell-style":{fontSize:"15px"}},{default:t(()=>[(b(!0),A(We,null,Me(Z.value,a=>(b(),S(M,{key:a.id,prop:a.id,label:a.label,align:"center","min-width":a.minWidth,"show-overflow-tooltip":a.showOverflowTooltip,sortable:a.sortable},Q({_:2},[a.render?{name:"default",fn:t($=>[(b(),S(Pe(a.render($.row))))]),key:"0"}:void 0]),1032,["prop","label","min-width","show-overflow-tooltip","sortable"]))),128)),l(M,{label:"操作",align:"center",width:"150px",fixed:"right"},{default:t(a=>[l(m,{type:"primary",text:"",bg:"",icon:o(ye),onClick:$=>ae(a.row)},{default:t(()=>e[22]||(e[22]=[i(" 修改负责人 ")])),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),g("div",Ke,[l(se,{background:"",layout:o(d).layout,"page-sizes":o(d).pageSizes,total:o(d).total,"page-size":o(d).pageSize,"current-page":o(d).currentPage,onSizeChange:o(H),onCurrentChange:o(j)},null,8,["layout","page-sizes","total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1})),[[Y,h.value]]),l(R,{"destroy-on-close":"",draggable:"",modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=a=>w.value=a),title:"修改负责人",width:"500","close-on-click-modal":!1},{footer:t(()=>[g("div",Ge,[l(m,{onClick:e[3]||(e[3]=a=>w.value=!1)},{default:t(()=>e[23]||(e[23]=[i(" 取消 ")])),_:1}),l(m,{type:"primary",onClick:oe,loading:E.value},{default:t(()=>e[24]||(e[24]=[i(" 确认 ")])),_:1},8,["loading"])])]),default:t(()=>[l(T,{modelValue:f.value.qy_staff_name,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value.qy_staff_name=a),placeholder:"请选择",style:{padding:"15px 0"}},{default:t(()=>[l(_,{label:"选项一",value:"option1"}),l(_,{label:"选项二",value:"option2"}),l(_,{label:"选项三",value:"option3"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(R,{draggable:"","destroy-on-close":"",modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=a=>C.value=a),title:"名单查询",width:"500","close-on-click-modal":!1,onClose:W},Q({default:t(()=>[l(P,{model:c.value,"label-width":"auto",style:{"padding-right":"20px"}},{default:t(()=>[l(p,{label:"旺旺ID"},{default:t(()=>[l(v,{modelValue:c.value.ww_id,"onUpdate:modelValue":e[5]||(e[5]=a=>c.value.ww_id=a),autocomplete:"off",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(p,{label:"店铺名称"},{default:t(()=>[l(v,{modelValue:c.value.store_name,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value.store_name=a),autocomplete:"off",placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),g("div",Xe,[l(m,{onClick:e[7]||(e[7]=a=>W())},{default:t(()=>e[25]||(e[25]=[i(" 取消 ")])),_:1}),l(m,{type:"primary",loading:k.value,onClick:e[8]||(e[8]=a=>te(c.value))},{default:t(()=>[i(D(k.value?"搜索中 ...":"搜索"),1)]),_:1},8,["loading"])])]),_:2},[x.value?{name:"footer",fn:t(()=>[l(de,{title:"搜索结果",direction:"horizontal",border:!0,column:1,style:{margin:"20px"}},{default:t(()=>[l(I,{"label-align":"center",label:"旺旺ID"},{default:t(()=>[i(D(V.value.ww_id),1)]),_:1}),l(I,{"label-align":"center",label:"店铺名称"},{default:t(()=>[i(D(V.value.store_name),1)]),_:1}),l(I,{"label-align":"center",label:"店铺状态"},{default:t(()=>[i(D(V.value.status?"正常营业":"停业"),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),l(R,{"destroy-on-close":"",draggable:"",modelValue:y.value,"onUpdate:modelValue":e[19]||(e[19]=a=>y.value=a),title:"新增订单",width:"500",class:"dialog-centered","close-on-click-modal":!1},{footer:t(()=>[g("div",Ze,[l(m,{onClick:le},{default:t(()=>e[26]||(e[26]=[i(" 取消 ")])),_:1}),l(m,{type:"primary",onClick:e[18]||(e[18]=a=>ee(q.value))},{default:t(()=>e[27]||(e[27]=[i(" 确认 ")])),_:1})])]),default:t(()=>[l(P,{"label-width":"auto",ref_key:"addFormRef",ref:q,model:o(n),rules:o(Qe),style:{padding:"20px 20px 0 20px"}},{default:t(()=>[l(p,{label:"订单ID:",prop:"order_id"},{default:t(()=>[l(v,{modelValue:o(n).order_id,"onUpdate:modelValue":e[10]||(e[10]=a=>o(n).order_id=a),placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"店主旺旺号:",prop:"ww_id"},{default:t(()=>[l(v,{modelValue:o(n).ww_id,"onUpdate:modelValue":e[11]||(e[11]=a=>o(n).ww_id=a),placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"订单名称:",prop:"order_name"},{default:t(()=>[l(v,{modelValue:o(n).order_name,"onUpdate:modelValue":e[12]||(e[12]=a=>o(n).order_name=a),placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"服务名称:",prop:"service_name"},{default:t(()=>[l(v,{modelValue:o(n).service_name,"onUpdate:modelValue":e[13]||(e[13]=a=>o(n).service_name=a),placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"订单状态:",prop:"status_name"},{default:t(()=>[l(T,{modelValue:o(n).status_name,"onUpdate:modelValue":e[14]||(e[14]=a=>o(n).status_name=a),placeholder:"请选择"},{default:t(()=>[l(_,{key:"1",label:"服务中",value:"true"}),l(_,{key:"2",label:"解除协议",value:"false"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"URL:",prop:"url"},{default:t(()=>[l(v,{modelValue:o(n).url,"onUpdate:modelValue":e[15]||(e[15]=a=>o(n).url=a),placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"负责人:",prop:"qy_staff_name"},{default:t(()=>[l(T,{modelValue:o(n).qy_staff_name,"onUpdate:modelValue":e[16]||(e[16]=a=>o(n).qy_staff_name=a),placeholder:"请选择"},{default:t(()=>[l(_,{key:"1",label:"负责人1",value:"v1"}),l(_,{key:"2",label:"负责人2",value:"v2"}),l(_,{key:"3",label:"负责人3",value:"v3"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"服务日期",prop:"start_service_time"},{default:t(()=>[l(ie,{modelValue:o(n).start_service_time,"onUpdate:modelValue":e[17]||(e[17]=a=>o(n).start_service_time=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),yl=Ye(el,[["__scopeId","data-v-6b941b99"]]);export{yl as default};
